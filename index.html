<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KAVISHFORTECH AI</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Share+Tech+Mono&display=swap');

:root{
--neon-green:#39ff14;
--neon-cyan:#00f3ff;
--neon-pink:#ff00ff;
--bg:#050510;
--panel:#0b0b1a;
}

*{box-sizing:border-box}

body{
margin:0;
background:var(--bg);
font-family:'Share Tech Mono',monospace;
color:white;
display:flex;
flex-direction:column;
align-items:center;
height:100vh;
overflow:hidden;
}

/* RGB HEADER */
#topBox{
width:95%;
margin-top:15px;
padding:18px;
text-align:center;
font-family:'Syncopate';
font-size:1.4rem;
border:3px solid red;
border-radius:14px;
animation:rgb 3s linear infinite;
}

@keyframes rgb{
0%{border-color:red;color:red;box-shadow:0 0 20px red}
33%{border-color:lime;color:lime;box-shadow:0 0 20px lime}
66%{border-color:cyan;color:cyan;box-shadow:0 0 20px cyan}
100%{border-color:red;color:red;box-shadow:0 0 20px red}
}

/* MAIN CHAT BOX */
#chatContainer{
width:95%;
max-width:1000px;
height:75vh;
margin-top:15px;
background:var(--panel);
border-radius:16px;
border:1px solid #222;
display:flex;
flex-direction:column;
overflow:hidden;
}

/* API BAR */
#apiBar{
display:flex;
gap:10px;
padding:10px;
background:#111;
border-bottom:1px solid #222;
}

#apiKeyInput{
flex:1;
padding:10px;
background:#000;
border:1px solid #333;
color:white;
}

#apiBar button{
background:var(--neon-green);
border:none;
padding:10px 15px;
cursor:pointer;
font-weight:bold;
}

/* MESSAGE AREA */
#messages{
flex:1;
padding:20px;
overflow-y:auto;
display:flex;
flex-direction:column;
}

.message{
margin-bottom:15px;
padding:12px;
border-radius:10px;
max-width:80%;
white-space:pre-wrap;
}

.user{
align-self:flex-end;
background:#111;
border-left:4px solid var(--neon-green);
}

.bot{
align-self:flex-start;
background:#111;
border-left:4px solid var(--neon-pink);
}

/* INPUT AREA */
#inputArea{
display:flex;
border-top:1px solid #222;
}

#userInput{
flex:1;
padding:15px;
background:#000;
border:none;
color:white;
font-size:1rem;
}

#sendBtn{
background:var(--neon-cyan);
border:none;
padding:15px 25px;
cursor:pointer;
font-weight:bold;
}

/* FILE UPLOAD */
#uploadBar{
padding:10px;
border-top:1px solid #222;
display:flex;
justify-content:space-between;
align-items:center;
background:#0f0f1f;
}

#fileInput{
color:white;
}

#fileStatus{
font-size:0.8rem;
color:#aaa;
}
</style>
</head>

<body>

<div id="topBox">KAVISHFORTECH AI</div>

<div id="chatContainer">

<!-- API KEY BAR -->
<div id="apiBar">
<input type="password" id="apiKeyInput" placeholder="Enter OpenAI API Key (sk-...)">
<button onclick="saveApiKey()">Save Key</button>
</div>

<div id="messages"></div>

<div id="inputArea">
<input id="userInput" type="text" placeholder="Ask anything...">
<button id="sendBtn">SEND</button>
</div>

<div id="uploadBar">
<input type="file" id="fileInput" multiple>
<div id="fileStatus">0 / 10 files uploaded</div>
</div>

</div>

<script>

/* ===========================
   API KEY HANDLING
=========================== */

let OPENAI_API_KEY = localStorage.getItem("openai_key") || "";

function saveApiKey(){
const key = document.getElementById("apiKeyInput").value.trim();

if(!key.startsWith("sk-")){
alert("Invalid API key.");
return;
}

OPENAI_API_KEY = key;
localStorage.setItem("openai_key", key);
alert("API Key Saved Successfully!");
}

/* ===========================
   CHAT SYSTEM
=========================== */

const messagesDiv = document.getElementById("messages");
const input = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");

function addMessage(text,type){
const div=document.createElement("div");
div.className="message "+type;
div.textContent=text;
messagesDiv.appendChild(div);
messagesDiv.scrollTop=messagesDiv.scrollHeight;
}

async function sendMessage(){

if(!OPENAI_API_KEY){
alert("Please enter API key first.");
return;
}

const text=input.value.trim();
if(!text)return;

addMessage(text,"user");
input.value="";

try{
const response=await fetch("https://api.openai.com/v1/chat/completions",{
method:"POST",
headers:{
"Content-Type":"application/json",
"Authorization":"Bearer "+OPENAI_API_KEY
},
body:JSON.stringify({
model:"gpt-4o-mini",
messages:[
{role:"system",content:"You are a helpful AI assistant."},
{role:"user",content:text}
]
})
});

const data=await response.json();

if(data.error){
addMessage("API Error: "+data.error.message,"bot");
return;
}

addMessage(data.choices[0].message.content,"bot");

}catch(e){
addMessage("Connection Error","bot");
}
}

sendBtn.onclick=sendMessage;
input.addEventListener("keydown",e=>{
if(e.key==="Enter")sendMessage();
});

/* ===========================
   FILE UPLOAD LIMIT SYSTEM
=========================== */

const fileInput=document.getElementById("fileInput");
const fileStatus=document.getElementById("fileStatus");

let uploadedFiles=[];
let uploadLockTime=localStorage.getItem("upload_lock") || null;

if(uploadLockTime && Date.now()>uploadLockTime){
localStorage.removeItem("upload_lock");
uploadLockTime=null;
}

fileInput.addEventListener("change",function(){

if(uploadLockTime && Date.now()<uploadLockTime){
alert("Upload locked. Try again after 1 hour.");
fileInput.value="";
return;
}

for(let file of fileInput.files){

if(uploadedFiles.length>=10){
uploadLockTime=Date.now()+(60*60*1000);
localStorage.setItem("upload_lock",uploadLockTime);
alert("10 files uploaded. Locked for 1 hour.");
break;
}

uploadedFiles.push(file);
}

fileStatus.textContent=uploadedFiles.length+" / 10 files uploaded";
fileInput.value="";
});

/* AUTO RESET CHECK */
setInterval(()=>{
if(uploadLockTime && Date.now()>uploadLockTime){
uploadLockTime=null;
uploadedFiles=[];
localStorage.removeItem("upload_lock");
fileStatus.textContent="0 / 10 files uploaded";
}
},10000);

</script>

</body>
</html>
